#### <a href="https://www.acwing.com/problem/content/106/">货仓选址</a>

-----------

##### 分析

在数轴上

设`N`家商店的位置依次是`a1, a2, a3, ..., an`，货仓的选址位置是`x`

那么题意是：找到使得`|a1 - x| + |a2 - x| + |a3 - x| + ... + |an - x|`的`x`

--------------

##### 思路

把所有点排序，在为`x`选择位置的时候，如果`N`是奇数，`x`就选到中位数，如果`N`是偶数，那么就选到中间的两个数之间的区间内部

---------------

##### 证明

先看`N`等于2的情况下

找到使得`|a - x| + |b - x|`的`x`，那么显然：`|a - x| + |b - x|` >= `|a - b|`

当`N` > 2 时，可以将`N`个数两两一组，首尾一组，依次向中，如果`N`是奇数，中间的数单独一组

那么对于`|a1 - x| + |a2 - x| + |a3 - x| + ... + |an - x|`

分组之后得到：`(|a1 - x| + |an - x|) + (|a2 - x| + |an-1 - x| + ...`

对于每一组都使用上述不等式：`|a - x| + |b - x|` >= `|a - b|`

得到：`(|a1 - x| + |an - x|) + (|a2 - x| + |an-1 - x| + ...` >= `(|an - a1|) + (|an-1 - a2|) + ...`，那么其最小值就是不等式右边

那么显然：

当`N`为奇数的时候，`x`取到中位数，可以使得每一组都取到对应的不等式右边的值，也就是说，将上述不等式取到等号

类似的当`N`为偶数时，`x`取到中间两个数之间，就可以取到上述不等式的等号

所以最优解就是`x`取到中间的时候的距离

-----------

##### 题解

```java
import java.util.*;

public class Main{
    public static void main(String[] args){
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt();
        int[] t = new int[n];
        for (int i = 0; i < n; i ++) {
            t[i] = sc.nextInt();
        }

        Arrays.sort(t);

        int res = 0;
        for (int i = 0; i < n; i ++) {
            res += Math.abs(t[i] - t[n / 2]);
        }
        System.out.println(res);
    }
}
```

---------------

##### 扩展

###### 将一维扩展成二维或三维

三分算法

###### 将一维扩展成`d`维

模拟退火算法

###### 将代码`res += Math.abs(t[i] - t[n / 2]);` 变成`res += Math.abs(t[i] - t[i / 2]);` 也可以 AC

首先这样写表达的意思是错误的，`x`的选址是一定的

但是可以证明两者是等价的

证明：
$$
\sum_{i = 0}^{n - 1}|ti - tn/2| = \sum_{i = 0}^{n - 1}|ti - ti/2|
$$

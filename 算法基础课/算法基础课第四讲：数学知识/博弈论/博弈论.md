### 博弈论

------------------------------

> #### 公平组合游戏ICG
>
> ​	若一个游戏满足以下要求：
>
> 1. 由两名玩家交替行动；
>
> 2. 在游戏进程的任意时刻，可以执行的合法行动与轮到哪名玩家无关；
>
> 3. 不能行动的玩家判负；
>
>    则称该游戏为一个公平组合游戏。
>    **NIM博弈属于公平组合游戏，**但城建的棋类游戏，比如围棋，就不是公平组合游戏。因为围棋交战双方分别只能落黑子和白子，胜负判定也比较复杂，不满足条件2和条件3。



> #### 有向图游戏
>
> ​	给定一个有向无环图，图中有一个唯一的起点，在起点上放有一枚棋子。两名玩家交替地把这枚棋子沿有向边进行移动，每次可以移动一步，无法移动者判负。该游戏被称为有向图游戏。
> ​	**任何一个公平组合游戏都可以转化为有向图游戏。**具体方法是，把每个局面看成图中的一个节点，并且从每个局面向沿着合法行动能够到达的下一个局面连有向边。



> #### NIM游戏
>
> ​	给定N堆物品，第i堆物品有Ai个。两名玩家轮流行动，每次可以任选一堆，取走任意多个物品，可把一堆取光，但不能不取。取走最后一件物品者获胜。两人都采取最优策略，问先手是否必胜。
>
> ​    我们把这种游戏称为 NIM 博弈。把游戏过程中面临的状态称为局面。整局游戏第一个行动的称为先手，第二个行动的称为后手。若在某一局面下无论采取何种行动，都会输掉游戏，则称该局面必败。
> 所谓采取最优策略是指，若在某一局面下存在某种行动，使得行动后对面面临必败局面，则优先采取该行动。同时，这样的局面被称为必胜。我们讨论的博弈问题一般都只考虑理想情况，即两人均无失误，都采取最优策略行动时游戏的结果。
>
> ​    NIM博弈不存在平局，只有先手必胜和先手必败两种情况。
>
> ##### 定理： NIM博弈，当且仅当 A1 ^ A2 ^ ... ^ An != 0 时，先手必胜，反之，当且仅当 A1 ^ A2 ^ ... ^ An == 0 时，先手必败



##### 先手必胜状态：

- 可以走到某一个先手必败的状态
- 先手操作完之后，可以让剩下的状态变成先手必败状态

##### 先手必败状态：

- 走不到任何一个先手必败状态

- 不管怎么操作，之后剩下的状态都是先手必胜状态

- 每堆物品数量为 0，即无法操作



#### 可以证明：

###### 	分三种情况证明：

- 当每堆物品的数量都是 0 的时候，即终点状态，0 ^ 0 ^ ... ^ 0 == 0

- 假设当前的异或值 A1 ^ A2 ^ ... ^ An == x != 0，证明**一定可以先手通过操作，使得 x 变成 0**

  证明：假设 x 的二进制表示中最高的一位 1 在第 k 位，则说明 A1 ~ A2 中必然存在一个数 Ai ，Ai 的二进制表示中第 k 位是 1，

  显然有：Ai ^ x < Ai ，则可以从 Ai 这堆物品中拿走若干物品，若干数量即 Ai - (Ai ^ x)，前面不等式保证了此操作合法，那么 Ai 堆物品就会变成 Ai - (Ai - (Ai ^ x)) = Ai ^ x

  上述操作之后，全部物品堆的异或值为：A1 ^ A2 ^ ... ^ Ai ^ x ^ A<sub>i + 1</sub> ^ ... ^ An = x ^ x = 0，即证明了第二点

- 假设当前的异或值 A1 ^ A2 ^ ... ^ An == x == 0，证明**不管怎么操作，操作之后 x 一定不等于 0**

  反证法证明：假设操作之后的异或值：A1 ^ A2 ^ ... ^ Ai<sup>&</sup> ^ A<sub>i + 1</sub> ^ ... ^ An == x == 0（Ai<sup>&</sup> 表示操作之后的堆），把上下两个等式左右两边异或起来，得到等式：Ai ^ Ai<sup>&</sup> = 0 ==> Ai = Ai<sup>&</sup> ，则矛盾了（因为前提是在 Ai 中拿走一些物品，不能不拿），即证明了第三点

###### 综上所述：

- 当先手拿到的状态不是 0，那么根据第二点，后手拿到的状态一定是 0，再根据第三点，先手再次拿到的状态一定不是 0，如此反复，物品的数量在减少，反复的进程一定可以停止，最后第一点的全 0 局面一定是后手拿到的，即**先手必胜状态**

- 当先手拿到的状态是 0，那么根据第三点，后手拿到的状态一定不是 0，再根据第二点，先手再次拿到的状态一定是 0，如此反复，

  物品的数量在减少，反复的进程一定可以停止，最后第一点的全 0 局面一定是先手拿到的，即**先手必败状态**

这样便证明了**定理： NIM博弈，当且仅当 A1 ^ A2 ^ ... ^ An != 0 时，先手必胜，反之，当且仅当 A1 ^ A2 ^ ... ^ An == 0 时，先手必败**

